---
title: Machine Learning Studio (klassisk) experiment
description: Använd Machine Learning Studio-modeller (klassisk) i Dynamics 365 Customer Insights.
ms.date: 12/03/2020
ms.service: customer-insights
ms.subservice: audience-insights
ms.topic: conceptual
author: m-hartmann
ms.author: mhart
ms.reviewer: ameetj
manager: shellyha
ms.openlocfilehash: 556b6810db0ed2733a3f086291757bd85b77e371
ms.sourcegitcommit: a9b2cf598f256d07a48bba8617347ee90024a1dd
ms.translationtype: HT
ms.contentlocale: sv-SE
ms.lasthandoff: 12/03/2020
ms.locfileid: "4669040"
---
# <a name="use-models-based-on-azure-machine-learning-studio-classic"></a><span data-ttu-id="d744c-103">Använd modeller baserade på Azure Machine Learning Studio (klassisk)</span><span class="sxs-lookup"><span data-stu-id="d744c-103">Use models based on Azure Machine Learning Studio (classic)</span></span>

<span data-ttu-id="d744c-104">Enhetliga data i Dynamics 365 Customer Insights är en källa för maskininlärningsmodeller som kan generera ytterligare affärsinsikter.</span><span class="sxs-lookup"><span data-stu-id="d744c-104">The unified data in Dynamics 365 Customer Insights is a source for building machine learning models that can generate additional business insights.</span></span> <span data-ttu-id="d744c-105">Customer Insights integreras med Machine Learning Studio (klassisk) för att använda dina egna anpassade modeller.</span><span class="sxs-lookup"><span data-stu-id="d744c-105">Customer Insights integrates with Machine Learning Studio (classic) to use your own custom models.</span></span> <span data-ttu-id="d744c-106">Om du vill se hur modeller som utvecklats i Azure Machine Learning integreras med Customer Insights, se [Azure Machine Learning-experiment](azure-machine-learning-experiments.md).</span><span class="sxs-lookup"><span data-stu-id="d744c-106">To see how models developed in Azure Machine Learning are integrated with Customer Insights, see [Azure Machine Learning experiments](azure-machine-learning-experiments.md).</span></span>

## <a name="prerequisites"></a><span data-ttu-id="d744c-107">Förutsättningar</span><span class="sxs-lookup"><span data-stu-id="d744c-107">Prerequisites</span></span>

- <span data-ttu-id="d744c-108">Åtkomst till Customer Insights</span><span class="sxs-lookup"><span data-stu-id="d744c-108">Access to Customer Insights</span></span>
- <span data-ttu-id="d744c-109">Aktiv prenumeration på Azure Enterprise</span><span class="sxs-lookup"><span data-stu-id="d744c-109">Active Azure Enterprise subscription</span></span>
- [<span data-ttu-id="d744c-110">Enhetliga kundprofiler</span><span class="sxs-lookup"><span data-stu-id="d744c-110">Unified customer profiles</span></span>](data-unification.md)
- <span data-ttu-id="d744c-111">[Konfigurera entitetsexport till Azure Blob-lagring](export-azure-blob-storage.md)</span><span class="sxs-lookup"><span data-stu-id="d744c-111">[Entity export to Azure Blob storage](export-azure-blob-storage.md) set up</span></span>

## <a name="set-up-machine-learning-studio-classic"></a><span data-ttu-id="d744c-112">Konfigurera Machine Learning Studio klassisk</span><span class="sxs-lookup"><span data-stu-id="d744c-112">Set up Machine Learning Studio Classic</span></span>

<span data-ttu-id="d744c-113">I ett första steg måste vi skapa en arbetsyta för och öppna Machine Learning Studio (klassisk).</span><span class="sxs-lookup"><span data-stu-id="d744c-113">In a first step, we need to create a workspace for and open the Machine Learning Studio (classic).</span></span>

1. <span data-ttu-id="d744c-114">Gå till [https://www.portal.azure.com](https://www.portal.azure.com/) och logga in.</span><span class="sxs-lookup"><span data-stu-id="d744c-114">Go to [https://www.portal.azure.com](https://www.portal.azure.com/) and sign in.</span></span>

1. <span data-ttu-id="d744c-115">Välj **Skapa en resurs**.</span><span class="sxs-lookup"><span data-stu-id="d744c-115">Select **Create a resource**.</span></span>

1. <span data-ttu-id="d744c-116">Sök **Machine Learning Studio-arbetsyta** och välj **Skapa**.</span><span class="sxs-lookup"><span data-stu-id="d744c-116">Search **Machine Learning Studio Workspace** and select **Create**.</span></span>

1. <span data-ttu-id="d744c-117">Ange de uppgifter som krävs för att [skapa arbetsytan](https://docs.microsoft.com/azure/machine-learning/studio/create-workspace).</span><span class="sxs-lookup"><span data-stu-id="d744c-117">Enter the required details to [create the workspace](https://docs.microsoft.com/azure/machine-learning/studio/create-workspace).</span></span> <span data-ttu-id="d744c-118">Välj **prisnivå för webbtjänstplanen** baserat på den mängd data du planerar att importera.</span><span class="sxs-lookup"><span data-stu-id="d744c-118">Choose the **Web service plan pricing tier** based on the amount of data you plan to import.</span></span> <span data-ttu-id="d744c-119">Bästa prestanda uppnår du genom att välja den **plats** som är geografiskt närmast dig.</span><span class="sxs-lookup"><span data-stu-id="d744c-119">For best performance, select the **Location** that is geographically closest to you.</span></span>

1. <span data-ttu-id="d744c-120">När du har skapat resursen visas instrumentpanelen för Machine Learning Studio-arbetsytan.</span><span class="sxs-lookup"><span data-stu-id="d744c-120">After creating the resource, the Machine Learning Studio workspace dashboard will appear.</span></span> <span data-ttu-id="d744c-121">Välj **Starta Machine Learning Studio**.</span><span class="sxs-lookup"><span data-stu-id="d744c-121">Select **Launch Machine Learning Studio**.</span></span>

   ![Azure Machine Learning Studio-användargränssnitt](media/azure-machine-learning-studio.png)

## <a name="work-with-azure-machine-learning-studio"></a><span data-ttu-id="d744c-123">Arbeta Azure Machine Learning Studio</span><span class="sxs-lookup"><span data-stu-id="d744c-123">Work with Azure Machine Learning Studio</span></span>

<span data-ttu-id="d744c-124">Nu kan du skapa ett nytt experiment eller importera en befintlig mall från exempelgalleriet.</span><span class="sxs-lookup"><span data-stu-id="d744c-124">You can now create a new experiment, or import an existing experiment template from the sample gallery.</span></span> <span data-ttu-id="d744c-125">Det finns exempelexperiment för tre standardscenarier:</span><span class="sxs-lookup"><span data-stu-id="d744c-125">There are sample experiments for three standard scenarios:</span></span>

- [<span data-ttu-id="d744c-126">Omsättningsprediktion</span><span class="sxs-lookup"><span data-stu-id="d744c-126">Churn prediction</span></span>](#churn-analysis)

- [<span data-ttu-id="d744c-127">Kundens livstidsvärde</span><span class="sxs-lookup"><span data-stu-id="d744c-127">Customer lifetime value</span></span>](#customer-lifetime-value-prediction)

- [<span data-ttu-id="d744c-128">Produktrekommendation eller nästa bästa åtgärd</span><span class="sxs-lookup"><span data-stu-id="d744c-128">Product recommendation or next best action</span></span>](#productrecommendation-or-next-best-action)

1. <span data-ttu-id="d744c-129">Om du skapar ett nytt experiment eller använder en experiment mall i galleriet måste du konfigurera egenskaperna **Importera data**.</span><span class="sxs-lookup"><span data-stu-id="d744c-129">If you create a new experiment or use an experiment template from the gallery, you need to configure the **Import Data** properties.</span></span> <span data-ttu-id="d744c-130">Använd den guidade upplevelsen eller ge detaljer direkt för att komma åt Azure Blob Storage som innehåller dina data.</span><span class="sxs-lookup"><span data-stu-id="d744c-130">Use the guided experience or directly provide details to access the Azure Blob Storage that contains your data.</span></span>  

   ![Azure Machine Learning Studio-experiment](media/azure-machine-learning-studio-experiment.png)

1. <span data-ttu-id="d744c-132">Nu kan du skapa en anpassad processpipeline för att rengöra och förbehandla data, extrahera funktioner och utbilda en lämplig modell.</span><span class="sxs-lookup"><span data-stu-id="d744c-132">Now you can build a custom processing pipeline to clean and preprocess the data, extract features, and train a suitable model.</span></span>

1. <span data-ttu-id="d744c-133">Testa och optimera modell prestanda.</span><span class="sxs-lookup"><span data-stu-id="d744c-133">Test and optimize the model performance.</span></span>

1. <span data-ttu-id="d744c-134">När du är nöjd med kvaliteten på en modell markerar du **Konfigurera webbtjänst** > **Prediktiva webbtjänst**.</span><span class="sxs-lookup"><span data-stu-id="d744c-134">When you’re satisfied with the quality of a model, select **Set up web service** > **Predictive Web Service**.</span></span> <span data-ttu-id="d744c-135">Det här alternativet importerar den utbildade modellen och funktionalisering pipeline från utbildningsexperimentet till en prediktiv tjänst.</span><span class="sxs-lookup"><span data-stu-id="d744c-135">This option imports the trained model and the featurization pipeline from the training experiment to a predictive service.</span></span> <span data-ttu-id="d744c-136">För den prediktiva tjänsten kan du utföra en ny uppsättning indata med det schema som används i övningsexperimentet för att göra prognoser.</span><span class="sxs-lookup"><span data-stu-id="d744c-136">The predictive service can take another set of input data with the schema used in the training experiment to make predictions.</span></span>

   ![Konfigurera en prediktiv webbtjänst](media/predictive-webservice-control.png)

1. <span data-ttu-id="d744c-138">När experimentet för prediktiv webbtjänst fungerar kan du distribuera det för automatisk schemaläggning.</span><span class="sxs-lookup"><span data-stu-id="d744c-138">Once the predictive web service experiment is successful, you can deploy it for auto scheduling.</span></span> <span data-ttu-id="d744c-139">Om du vill att webbtjänsten ska fungera med Customer Insights väljer du **distribuera webbtjänst** > **förhandsversion av distribuera webbtjänst [ny]**.</span><span class="sxs-lookup"><span data-stu-id="d744c-139">To have the web service work with Customer Insights, select **Deploy Web Service** > **Deploy Web Service [New] Preview**.</span></span> <span data-ttu-id="d744c-140">[Läs mer om distribuera en webbtjänst](https://docs.microsoft.com/azure/machine-learning/studio/deploy-a-machine-learning-web-service)</span><span class="sxs-lookup"><span data-stu-id="d744c-140">[Learn more about deploying a web service](https://docs.microsoft.com/azure/machine-learning/studio/deploy-a-machine-learning-web-service).</span></span>

   ![Distribuera en prediktiv webbtjänst](media/predictive-webservice-deploy.png)

## <a name="sample-models-from-the-gallery"></a><span data-ttu-id="d744c-142">Exempelmodeller från galleriet</span><span class="sxs-lookup"><span data-stu-id="d744c-142">Sample models from the gallery</span></span>

<span data-ttu-id="d744c-143">Vi använder ett fiktivt scenario med Contoso hotell för modellerna i den här artikeln.</span><span class="sxs-lookup"><span data-stu-id="d744c-143">We'll use a fictitious scenario of Contoso Hotel for the models in this article.</span></span> <span data-ttu-id="d744c-144">Contoso Hotel samlar in följande data:</span><span class="sxs-lookup"><span data-stu-id="d744c-144">Contoso Hotel gathers the following data:</span></span>

- <span data-ttu-id="d744c-145">CRM-data som består av hotell vistelseaktivitet.</span><span class="sxs-lookup"><span data-stu-id="d744c-145">CRM data consisting of hotel stay activity.</span></span> <span data-ttu-id="d744c-146">Datauppsättningen innehåller information om vilka datum som är kvar för varje registrerad kund.</span><span class="sxs-lookup"><span data-stu-id="d744c-146">The data set includes information about the dates of stay for each registered customer.</span></span> <span data-ttu-id="d744c-147">Den innehåller också information om bokning, rumstyper, detaljer om utgifter och så vidare.</span><span class="sxs-lookup"><span data-stu-id="d744c-147">It also contains information about the booking, room types, details of spend, and so on.</span></span> <span data-ttu-id="d744c-148">Uppgifterna omfattar fyra år, från 2014 till januari till januari 2018.</span><span class="sxs-lookup"><span data-stu-id="d744c-148">The data spans four years, from January 2014 to January 2018.</span></span>
- <span data-ttu-id="d744c-149">Kund profiler för hotellgäster.</span><span class="sxs-lookup"><span data-stu-id="d744c-149">Customer profiles of hotel guests.</span></span> <span data-ttu-id="d744c-150">Profilerna innehåller information om varje kund, inklusive namn, födelsedatum, postadress, kön och telefonnummer.</span><span class="sxs-lookup"><span data-stu-id="d744c-150">These profiles contain information about each customer, including their name, birthdate, postal address, gender, and phone number.</span></span>
- <span data-ttu-id="d744c-151">Användning av tjänster som hotellen erbjuder, till exempel spa, tvätt, WiFi eller bud.</span><span class="sxs-lookup"><span data-stu-id="d744c-151">Usage of services offered by the hotel, such as the spa, laundry, WiFi, or courier.</span></span> <span data-ttu-id="d744c-152">Den här informationen loggas för varje registrerad kund.</span><span class="sxs-lookup"><span data-stu-id="d744c-152">This information is logged for each registered customer.</span></span> <span data-ttu-id="d744c-153">Användning av tjänster länkas vanligen till vistelsen.</span><span class="sxs-lookup"><span data-stu-id="d744c-153">Typically, use of services is linked with the stay.</span></span> <span data-ttu-id="d744c-154">I vissa fall kan tjänster användas av kunder utan att behöva vistas på hotellet.</span><span class="sxs-lookup"><span data-stu-id="d744c-154">In some cases, services can be used by customers without staying in the hotel.</span></span>

## <a name="churn-analysis"></a><span data-ttu-id="d744c-155">Omsättningsanalys</span><span class="sxs-lookup"><span data-stu-id="d744c-155">Churn Analysis</span></span>

<span data-ttu-id="d744c-156">Omsättningsanalysen gäller för olika affärs områden.</span><span class="sxs-lookup"><span data-stu-id="d744c-156">Churn analysis applies to different business areas.</span></span> <span data-ttu-id="d744c-157">I det här exemplet ska vi titta på tjänstomsättning, specifikt inom ramen för hotelltjänster enligt beskrivningen ovan.</span><span class="sxs-lookup"><span data-stu-id="d744c-157">In this example, we’re going to look at service churn, specifically in the context of hotel services as described above.</span></span> <span data-ttu-id="d744c-158">Den innehåller ett arbetsexempel på ett försäljningsförlopp som kan användas som utgångspunkt för vilken annan typ av omsättningsmodell som helst.</span><span class="sxs-lookup"><span data-stu-id="d744c-158">It provides a working example of an end–to–end model pipeline that can be used as a starting point for any other type of churn model.</span></span>

### <a name="definition-of-churn"></a><span data-ttu-id="d744c-159">Definition av omsättning</span><span class="sxs-lookup"><span data-stu-id="d744c-159">Definition of Churn</span></span>

<span data-ttu-id="d744c-160">Definitionen av omsättning kan skilja sig från de olika scenarierna.</span><span class="sxs-lookup"><span data-stu-id="d744c-160">The definition of churn can differ based on the scenario.</span></span> <span data-ttu-id="d744c-161">I det här exemplet bör en gäst som inte har besökt hotellet under det senaste året vara märkt som uppdelad på omsättning.</span><span class="sxs-lookup"><span data-stu-id="d744c-161">In this example, a guest who hasn’t visited the hotel in the past year should be labeled as churned.</span></span>  

<span data-ttu-id="d744c-162">Du kan importera experimentmallen från galleriet.</span><span class="sxs-lookup"><span data-stu-id="d744c-162">The experiment template can be imported from the gallery.</span></span> <span data-ttu-id="d744c-163">Börja med att importera data för **hotelvistelseaktivitet**, **kunddata** och **tjänstens användningsdata** från Azure Blob Storage.</span><span class="sxs-lookup"><span data-stu-id="d744c-163">First, ensure that you import the data for **Hotel Stay Activity**, **Customer data**, and **Service Usage Data** from Azure Blob storage.</span></span>

   ![Importera data för omsättningsmodell](media/import-data-azure-blob-storage.png)

### <a name="featurization"></a><span data-ttu-id="d744c-165">Funktionalisering</span><span class="sxs-lookup"><span data-stu-id="d744c-165">Featurization</span></span>

<span data-ttu-id="d744c-166">Baserat på definitionen av omsättningen identifierar vi först de obearbetade funktioner som påverkar etiketten.</span><span class="sxs-lookup"><span data-stu-id="d744c-166">Based on the definition of churn, we first identify the raw features that will influence the label.</span></span> <span data-ttu-id="d744c-167">Sedan bearbetar vi dessa obearbetade funktioner till numeriska funktioner som kan användas med maskininlärningsmodeller.</span><span class="sxs-lookup"><span data-stu-id="d744c-167">Then, we process these raw features into numerical features that can be used with machine learning models.</span></span> <span data-ttu-id="d744c-168">Dataintegrering sker i Customer Insights så att vi kan sammanfoga dessa tabeller genom att använda *kund-ID*.</span><span class="sxs-lookup"><span data-stu-id="d744c-168">Data integration happens in Customer Insights so we can join these tables by using the *Customer ID*.</span></span>

   ![Anslut importerade data](media/join-imported-data.png)

<span data-ttu-id="d744c-170">Funktionalisering för att bygga modellen för omsättningsanalys kan vara lite knepigt.</span><span class="sxs-lookup"><span data-stu-id="d744c-170">The featurization for building the model for churn analysis can be a little tricky.</span></span> <span data-ttu-id="d744c-171">Data är en funktion av tid med ny hotellaktivitet registrerad dagligen.</span><span class="sxs-lookup"><span data-stu-id="d744c-171">The data is a function of time with new hotel activity recorded on daily basis.</span></span> <span data-ttu-id="d744c-172">Under funktionalisering vill vi skapa statiska funktioner från de dynamiska data.</span><span class="sxs-lookup"><span data-stu-id="d744c-172">During featurization, we want to generate static features from the dynamic data.</span></span> <span data-ttu-id="d744c-173">I det här fallet genererar vi flera funktioner från hotellaktiviteten med ett skjutfönster för ett år.</span><span class="sxs-lookup"><span data-stu-id="d744c-173">In this case, we generate multiple features from hotel activity with a sliding window of one year.</span></span> <span data-ttu-id="d744c-174">Vi expanderar även de kategorifunktionerna som rumstyp eller bokningstyp i separata funktioner med enkel kodning.</span><span class="sxs-lookup"><span data-stu-id="d744c-174">We also expand the categorical features like room type or booking type into separate features using one-hot encoding.</span></span>  

<span data-ttu-id="d744c-175">Slutlig lista över funktioner:</span><span class="sxs-lookup"><span data-stu-id="d744c-175">Final list of features:</span></span>

| <span data-ttu-id="d744c-176">**Antal**</span><span class="sxs-lookup"><span data-stu-id="d744c-176">**Number**</span></span>  | <span data-ttu-id="d744c-177">**Original_Column**</span><span class="sxs-lookup"><span data-stu-id="d744c-177">**Original_Column**</span></span>          | <span data-ttu-id="d744c-178">**Härledda funktioner**</span><span class="sxs-lookup"><span data-stu-id="d744c-178">**Derived Features**</span></span>                                                                                                                      |
|-------------|------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="d744c-179">1</span><span class="sxs-lookup"><span data-stu-id="d744c-179">1</span></span>           | <span data-ttu-id="d744c-180">Rumstyp</span><span class="sxs-lookup"><span data-stu-id="d744c-180">Room Type</span></span>                    | <span data-ttu-id="d744c-181">RoomTypeLargeCount, RoomTypeSmallCount</span><span class="sxs-lookup"><span data-stu-id="d744c-181">RoomTypeLargeCount, RoomTypeSmallCount</span></span>                                                                                                    |
| <span data-ttu-id="d744c-182">2</span><span class="sxs-lookup"><span data-stu-id="d744c-182">2</span></span>           | <span data-ttu-id="d744c-183">Bokningstyp</span><span class="sxs-lookup"><span data-stu-id="d744c-183">Booking Type</span></span>                 | <span data-ttu-id="d744c-184">BookingTypeOnlineCount, BookingTypePhoneCallCount</span><span class="sxs-lookup"><span data-stu-id="d744c-184">BookingTypeOnlineCount, BookingTypePhoneCallCount</span></span>                                                                                         |
| <span data-ttu-id="d744c-185">3</span><span class="sxs-lookup"><span data-stu-id="d744c-185">3</span></span>           | <span data-ttu-id="d744c-186">Resekategori</span><span class="sxs-lookup"><span data-stu-id="d744c-186">Travel Category</span></span>              | <span data-ttu-id="d744c-187">TravelCategoryBusinessCount, TravelCategoryLeisureCount</span><span class="sxs-lookup"><span data-stu-id="d744c-187">TravelCategoryBusinessCount, TravelCategoryLeisureCount</span></span>                                                                                   |
| <span data-ttu-id="d744c-188">4</span><span class="sxs-lookup"><span data-stu-id="d744c-188">4</span></span>           | <span data-ttu-id="d744c-189">Spenderade pengar</span><span class="sxs-lookup"><span data-stu-id="d744c-189">Dollars Spent</span></span>                | <span data-ttu-id="d744c-190">TotalDollarSpent</span><span class="sxs-lookup"><span data-stu-id="d744c-190">TotalDollarSpent</span></span>                                                                                                                          |
| <span data-ttu-id="d744c-191">5</span><span class="sxs-lookup"><span data-stu-id="d744c-191">5</span></span>           | <span data-ttu-id="d744c-192">Datum för incheckning och kassa</span><span class="sxs-lookup"><span data-stu-id="d744c-192">Check-in and Checkout dates</span></span>  | <span data-ttu-id="d744c-193">StayDayCount, StayDayCount2016, StayDayCount2015, StayDayCount2014, StayCount, StayCount2016.</span><span class="sxs-lookup"><span data-stu-id="d744c-193">StayDayCount, StayDayCount2016, StayDayCount2015, StayDayCount2014, StayCount, StayCount2016.</span></span> <span data-ttu-id="d744c-194">StayCount2015, StayCount2014</span><span class="sxs-lookup"><span data-stu-id="d744c-194">StayCount2015, StayCount2014</span></span>                |
| <span data-ttu-id="d744c-195">6</span><span class="sxs-lookup"><span data-stu-id="d744c-195">6</span></span>           | <span data-ttu-id="d744c-196">Tjänsteanvändning</span><span class="sxs-lookup"><span data-stu-id="d744c-196">Service Usage</span></span>                | <span data-ttu-id="d744c-197">UsageTenure, ConciergeUsage, CourierUsage, DryCleaningUsage, GymUsage, PhoneUsage, RestaurantUsage, SpaUsage, TelevisionUsage, WifiUsage</span><span class="sxs-lookup"><span data-stu-id="d744c-197">UsageTenure, ConciergeUsage, CourierUsage, DryCleaningUsage, GymUsage, PhoneUsage, RestaurantUsage, SpaUsage, TelevisionUsage, WifiUsage</span></span>  |

### <a name="model-selection"></a><span data-ttu-id="d744c-198">Modellval</span><span class="sxs-lookup"><span data-stu-id="d744c-198">Model selection</span></span>

<span data-ttu-id="d744c-199">Nu måste du välja den optimala algoritm som ska användas.</span><span class="sxs-lookup"><span data-stu-id="d744c-199">Now we need to choose the optimal algorithm to use.</span></span> <span data-ttu-id="d744c-200">I det här fallet bygger de flesta funktioner på kategorifunktioner.</span><span class="sxs-lookup"><span data-stu-id="d744c-200">In this case, most features are based on categorical features.</span></span> <span data-ttu-id="d744c-201">Vanligtvis fungerar beslutsträdsbaserade modeller bra.</span><span class="sxs-lookup"><span data-stu-id="d744c-201">Typically, decision tree–based models work well.</span></span> <span data-ttu-id="d744c-202">Om det bara finns numeriska funktioner kan neuralt nätverk vara ett bättre val.</span><span class="sxs-lookup"><span data-stu-id="d744c-202">If there are only numerical features, neural networks could be a better choice.</span></span> <span data-ttu-id="d744c-203">Support vektormaskin (SVM) är också en bra kandidat i sådana situationer. men det behövs en del av finjusteringen för att extrahera bästa prestanda.</span><span class="sxs-lookup"><span data-stu-id="d744c-203">Support vector machine (SVM) also is a good candidate in such situations; however, it needs quite a bit of tuning to extract the best performance.</span></span> <span data-ttu-id="d744c-204">Vi väljer **ett beslutsträd med två klasser** som den föredragna modellen, följd av **SVM i två klasser** som den andra modellen.</span><span class="sxs-lookup"><span data-stu-id="d744c-204">We choose **Two-Class Boosted Decision Tree** as the first model of choice followed by **Two-Class SVM** as the second model.</span></span> <span data-ttu-id="d744c-205">Med Azure Machine Learning Studio kan du göra ett A/B-test och därför bör du börja med två modeller i stället för en.</span><span class="sxs-lookup"><span data-stu-id="d744c-205">Azure Machine Learning Studio lets you do A/B testing, so it’s beneficial to start with two models rather than one.</span></span>

<span data-ttu-id="d744c-206">I följande bild visas modellutbildning och utvärderingsförlopp från Azure Machine Learning Studio:</span><span class="sxs-lookup"><span data-stu-id="d744c-206">The following image shows the model training and evaluation pipeline from Azure Machine Learning Studio:</span></span>

![Omsättningsmodell i Azure Machine Learning Studio](media/azure-machine-learning-model.png)

<span data-ttu-id="d744c-208">Vi kan också använda en metod med namnet **permutationsfunktionens prioritet**, en viktig aspekt av modelloptimeringen.</span><span class="sxs-lookup"><span data-stu-id="d744c-208">We also apply a technique called **Permutation Feature Importance**, an important aspect of model optimization.</span></span> <span data-ttu-id="d744c-209">De inbyggda modellerna har liten eller ingen insikt i effekten av någon särskild funktion på den slutliga prediktionen.</span><span class="sxs-lookup"><span data-stu-id="d744c-209">Built-in models have little to no insight into the impact of any specific feature on the final prediction.</span></span> <span data-ttu-id="d744c-210">I kalkylatorn för funktionsprioritet används en anpassad algoritm för att beräkna hur enskilda funktioner påverkas av resultatet för en viss modell.</span><span class="sxs-lookup"><span data-stu-id="d744c-210">The feature importance calculator uses a custom algorithm to compute the influence of individual features on the outcome for a specific model.</span></span> <span data-ttu-id="d744c-211">Funktionens prioritet är normaliserad mellan +1 och -1.</span><span class="sxs-lookup"><span data-stu-id="d744c-211">The feature importance is normalized between +1 to -1.</span></span> <span data-ttu-id="d744c-212">En negativ inverkan betyder att motsvarande funktion har ett kontraintuitivt inflytande på resultatet och bör tas bort från modellen.</span><span class="sxs-lookup"><span data-stu-id="d744c-212">A negative influence means the corresponding feature has counter-intuitive influence on the outcome and should be removed from the model.</span></span> <span data-ttu-id="d744c-213">Ett positivt inflytande tyder på att funktionen bidrar mycket över prediktion.</span><span class="sxs-lookup"><span data-stu-id="d744c-213">A positive influence indicates the feature is contributing heavily towards the prediction.</span></span> <span data-ttu-id="d744c-214">De här värdena är inte korrelationskoefficienter eftersom de är olika mått.</span><span class="sxs-lookup"><span data-stu-id="d744c-214">These values aren't correlation coefficients as they are different metrics.</span></span> <span data-ttu-id="d744c-215">Mer information finns i [permutationsfunktionens prioritet](https://docs.microsoft.com/azure/machine-learning/studio-module-reference/permutation-feature-importance).</span><span class="sxs-lookup"><span data-stu-id="d744c-215">For more information, see [Permutation Feature Importance](https://docs.microsoft.com/azure/machine-learning/studio-module-reference/permutation-feature-importance).</span></span>

<span data-ttu-id="d744c-216">Hela [omsättningsexperimentet finns tillgängligt i Azure AI Gallery](https://gallery.azure.ai/Experiment/Hotel-Churn-Predictive-Exp).</span><span class="sxs-lookup"><span data-stu-id="d744c-216">The entire [churn experiment is available in the Azure AI Gallery](https://gallery.azure.ai/Experiment/Hotel-Churn-Predictive-Exp).</span></span>

## <a name="customer-lifetime-value-prediction"></a><span data-ttu-id="d744c-217">Prediktion av kundens livstidsvärde</span><span class="sxs-lookup"><span data-stu-id="d744c-217">Customer lifetime value prediction</span></span>

<span data-ttu-id="d744c-218">Beräkningen av kundens livstidsvärde (CLTV) är ett av de nyckelvärden som ett företag kan använda för att utvärdera och segmentera sina kunder.</span><span class="sxs-lookup"><span data-stu-id="d744c-218">The customer lifetime value (CLTV) calculation is one of the key metrics that a business can use to assess and segment its customers.</span></span> <span data-ttu-id="d744c-219">För hotellverksamheterna är det mycket viktigt att känna till sina kunder.</span><span class="sxs-lookup"><span data-stu-id="d744c-219">For the hotel business, it’s critical to know their customers.</span></span> <span data-ttu-id="d744c-220">Till exempel är det viktigt att förstå faktorer som gör kunder bra.</span><span class="sxs-lookup"><span data-stu-id="d744c-220">For example, understanding factors that make up good customers is crucial information.</span></span> <span data-ttu-id="d744c-221">Det hjälper hotelledningen att utvärdera vilka funktioner de behöver fokusera på och förbättra för att tillfredsställa sina högt betalande kunder.</span><span class="sxs-lookup"><span data-stu-id="d744c-221">It helps the hotel management assess which features they need to focus on and improve to satisfy their high paying customers.</span></span> <span data-ttu-id="d744c-222">Dessa beslut kan ha en direkt inverkan på försäljning och intäkter.</span><span class="sxs-lookup"><span data-stu-id="d744c-222">These decisions can have a direct impact on sales and earnings.</span></span>  

### <a name="definition-of-cltv"></a><span data-ttu-id="d744c-223">Definition av CLTV</span><span class="sxs-lookup"><span data-stu-id="d744c-223">Definition of CLTV</span></span>

<span data-ttu-id="d744c-224">I det här exemplet definierar vi CLTV för en kund som det totala belopp som kunden förväntas spendera under de kommande 365 dagarna.</span><span class="sxs-lookup"><span data-stu-id="d744c-224">For this example, we define the CLTV of a customer as the total dollar amount the customer is expected to spend in the next 365 days.</span></span> <span data-ttu-id="d744c-225">Vi använder de senaste tre årens data för alla kunder för att förutse detta värde.</span><span class="sxs-lookup"><span data-stu-id="d744c-225">We are going to use the past three years’ worth of data for all customers to predict this value.</span></span>

### <a name="featurization"></a><span data-ttu-id="d744c-226">Funktionalisering</span><span class="sxs-lookup"><span data-stu-id="d744c-226">Featurization</span></span>

<span data-ttu-id="d744c-227">I det här fallet ska funktionalisering vara ungefär som omsättningssituationen.</span><span class="sxs-lookup"><span data-stu-id="d744c-227">In this case, featurization is going to be quite like the churn scenario.</span></span> <span data-ttu-id="d744c-228">Etiketterna och de förutsagda värdena är emellertid annorlunda än de som anges ovan.</span><span class="sxs-lookup"><span data-stu-id="d744c-228">However, the labels and predicted values are different than defined above.</span></span>

### <a name="model-selection"></a><span data-ttu-id="d744c-229">Modellval</span><span class="sxs-lookup"><span data-stu-id="d744c-229">Model selection</span></span>

<span data-ttu-id="d744c-230">Att förutsäga CLTV är ett regressionsproblem eftersom det förutsagda värdet är en positiv, kontinuerlig variabel.</span><span class="sxs-lookup"><span data-stu-id="d744c-230">Predicting the CLTV is a regression problem as the predicted value is a positive valued continuous variable.</span></span> <span data-ttu-id="d744c-231">Baserat på funktionsegenskaperna väljer vi **Regression av förbättrat beslutsträd** som en algoritm och **Neural nätverksregression** som en annan algoritm för att utbilda modellen.</span><span class="sxs-lookup"><span data-stu-id="d744c-231">Based on the feature properties, we select **Boosted Decision Tree Regression** as one algorithm and **Neural Network Regression** as another algorithm to train the model.</span></span>

## <a name="product-recommendation-or-next-best-action"></a><span data-ttu-id="d744c-232">Produktrekommendation eller näst bästa åtgärd</span><span class="sxs-lookup"><span data-stu-id="d744c-232">Product recommendation or Next Best Action</span></span>

<span data-ttu-id="d744c-233">Produktrekommendationer i ett hotellscenario tolkas som en rekommendation av tjänster från hotellet till kunderna.</span><span class="sxs-lookup"><span data-stu-id="d744c-233">Product recommendation in a hotel scenario is interpreted as recommending services offered by the hotel to the customers.</span></span> <span data-ttu-id="d744c-234">Målet är att välja lämpliga tjänster för kunderna så att användningen av dem maximeras.</span><span class="sxs-lookup"><span data-stu-id="d744c-234">The objective is to choose the appropriate services for customers so that their usage is maximized.</span></span> <span data-ttu-id="d744c-235">Det påminner om film rekommendationer för användare av tjänster för videoströmning.</span><span class="sxs-lookup"><span data-stu-id="d744c-235">It’s similar to movie recommendations for video streaming service users.</span></span>

### <a name="definition-of-product-recommendation-or-next-best-action"></a><span data-ttu-id="d744c-236">Definition av produktrekommendation eller nästa bästa åtgärd</span><span class="sxs-lookup"><span data-stu-id="d744c-236">Definition of Product Recommendation or Next Best Action</span></span>

<span data-ttu-id="d744c-237">Vi definierar målet med att maximera antalet kronor i tjänstanvändningen genom att erbjuda de bästa tjänsterna till hotellkunder utifrån deras intresse.</span><span class="sxs-lookup"><span data-stu-id="d744c-237">We define the goal as maximizing the dollar amount of service usage by offering the best matching services to hotel customers according to their interest.</span></span>

### <a name="featurization"></a><span data-ttu-id="d744c-238">Funktionalisering</span><span class="sxs-lookup"><span data-stu-id="d744c-238">Featurization</span></span>

<span data-ttu-id="d744c-239">Precis som i omsättningsmodellen sammanfogar vi hotellets ServiceCustomerID med CustomerID för att skapa rekommendationer konsekvent per CustomerID.</span><span class="sxs-lookup"><span data-stu-id="d744c-239">Like the churn model, we are joining the hotel ServiceCustomerID with CustomerID in order to build recommendations consistently per CustomerID.</span></span>

![Funktionalisering för rekommendationsmodellen](media/azure-machine-learning-model-featurization.png)

<span data-ttu-id="d744c-241">Data hämtas från tre olika entiteter och funktioner hämtas från dem.</span><span class="sxs-lookup"><span data-stu-id="d744c-241">The data is sourced from three different entities and features are derived from them.</span></span> <span data-ttu-id="d744c-242">Funktionalisering för rekommendationsproblemet skiljer sig jämfört med omsättnings- eller CLTV-scenarier.</span><span class="sxs-lookup"><span data-stu-id="d744c-242">The featurization for the problem of recommendation is different compared to churn or CLTV scenarios.</span></span> <span data-ttu-id="d744c-243">För rekommendationsmodellen krävs indata i form av tre uppsättningar funktioner.</span><span class="sxs-lookup"><span data-stu-id="d744c-243">The recommendation model needs input data in the form of three sets of features.</span></span>

### <a name="model-selection"></a><span data-ttu-id="d744c-244">Modellval</span><span class="sxs-lookup"><span data-stu-id="d744c-244">Model selection</span></span>

<span data-ttu-id="d744c-245">Vi förutsäger produkter eller tjänster med hjälp av algoritmen som kallas **Träna Matchbox-rekommenderaren** för att träna rekommendationsmodellen.</span><span class="sxs-lookup"><span data-stu-id="d744c-245">We predict products or services by using the algorithm called **Train Matchbox Recommender** to train the recommendation model.</span></span>

![Algoritmen för produktrekommendationer](media/azure-machine-learning-model-recommendation-algorithm.png)

<span data-ttu-id="d744c-247">De tre ingångsportarna för modellen **Träna Matchbox-rekommenderaren** tar in utbildningstjänstens användningsdata, kundbeskrivning (valfritt) och tjänstbeskrivning.</span><span class="sxs-lookup"><span data-stu-id="d744c-247">The three input ports for the **Train Matchbox Recommender** model takes in the training service usage data, customer description (optional), and service description.</span></span> <span data-ttu-id="d744c-248">Det finns tre olika sätt att bedöma modellen på.</span><span class="sxs-lookup"><span data-stu-id="d744c-248">There are three different ways of scoring the model.</span></span> <span data-ttu-id="d744c-249">En är för modellutvärdering, där en poäng för normaliserad diskonterad vinst (NDCG) beräknas för att rangordna de klassificerade objekten.</span><span class="sxs-lookup"><span data-stu-id="d744c-249">One is for model evaluation where a Normalized Discounted Cumulative Gain (NDCG) score is calculated to rank the rated items.</span></span> <span data-ttu-id="d744c-250">I det här testet har vi NDCG-poängen som 0,97.</span><span class="sxs-lookup"><span data-stu-id="d744c-250">In this experiment, we have the NDCG score as 0.97.</span></span> <span data-ttu-id="d744c-251">De andra två alternativen bedömer modellen för hela den rekommenderade tjänstkatalogen, eller endast de artiklar som användarna inte har använt tidigare.</span><span class="sxs-lookup"><span data-stu-id="d744c-251">The other two options are scoring the model on the entire recommendable service catalog, or scoring only on items that users have not used before.</span></span>

<span data-ttu-id="d744c-252">Om vi tittar närmare på fördelningen av rekommendationer i hela tjänstkatalogen, ser vi att telefon, WiFi och kurir är de tjänster som rekommenderas mest.</span><span class="sxs-lookup"><span data-stu-id="d744c-252">Looking further on the distributions of the recommendations on the entire service catalog, we notice that phone, WiFi, and courier are the top services to be recommended.</span></span> <span data-ttu-id="d744c-253">Detta överensstämmer med vad som upptäcktes från distributionerna av tjänstens förbrukningsdata:</span><span class="sxs-lookup"><span data-stu-id="d744c-253">This is consistent with what we found from the distributions of the service consumption data:</span></span>

![Resultat för rekommendationsmodell](media/azure-machine-learning-model-output.png)

<span data-ttu-id="d744c-255">Hela [produktrekommendationsexperimentet finns i Azure AI Gallery.](https://gallery.azure.ai/Experiment/Recommendation-4)</span><span class="sxs-lookup"><span data-stu-id="d744c-255">The entire [product recommendation experiment can be accessed in Azure AI Gallery.](https://gallery.azure.ai/Experiment/Recommendation-4)</span></span>

## <a name="integrate-custom-models"></a><span data-ttu-id="d744c-256">Integrera anpassade modeller</span><span class="sxs-lookup"><span data-stu-id="d744c-256">Integrate custom models</span></span>

<span data-ttu-id="d744c-257">Om du vill använda dessa förutsägelser i Customer Insights måste du **exportera** förutsägelserna tillsammans med kund-ID.</span><span class="sxs-lookup"><span data-stu-id="d744c-257">To use these predictions in Customer Insights, you need to **export** the predictions along with the customer IDs.</span></span> <span data-ttu-id="d744c-258">[Exportera dem till samma Azure Blob Storage-plats](https://docs.microsoft.com/azure/storage/common/storage-import-export-data-from-blobs) som du exporterar källdata till.</span><span class="sxs-lookup"><span data-stu-id="d744c-258">[Export them to the same Azure Blob storage location](https://docs.microsoft.com/azure/storage/common/storage-import-export-data-from-blobs) that you export the source data to.</span></span> <span data-ttu-id="d744c-259">Den förutsägbara webbtjänsten kan schemaläggas att köras regelbundet och uppdateras.</span><span class="sxs-lookup"><span data-stu-id="d744c-259">The predictive web service can be scheduled to run regularly and update the scores.</span></span>

<span data-ttu-id="d744c-260">Data som genereras av den anpassade modellen kan användas för att ytterligare berika dina kunddata.</span><span class="sxs-lookup"><span data-stu-id="d744c-260">Data generated by the custom model can be used to further enrich your customer data.</span></span> <span data-ttu-id="d744c-261">Mer information finns i [anpassade maskininlärningsmodeller](custom-models.md).</span><span class="sxs-lookup"><span data-stu-id="d744c-261">For more information, see [Custom machine learning models](custom-models.md).</span></span>
